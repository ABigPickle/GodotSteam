<!DOCTYPE HTML>
<html>
	<head>
		<title>GodotSteam - A Steamworks Module For Godot Engine | By Gramps | GitHub</title>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="css/main.css" />
		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous" />
		<!--[if lt IE 9]>
			<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
		<!--[if lt IE 8]>
		<link rel="stylesheet" href="{{ '/css/ie.css' | relative_url }}">
		<![endif]-->
	</head>
	<body class="is-preload">
		<!-- Wrapper -->
		<div id="wrapper">
			<!-- Main -->
			<div id="main">
				<div class="inner">
					<!-- Header -->
					<header id="header">
						<a href="index.html" class="logo"><strong>GodotSteam</strong> A Steamworks module for Godot Engine</a>
					</header>
					<!-- Section -->
					<section>
						<header class="main">
							<h1>Tutorials - Initializing Steam</h1>
						</header>
						<p>In this tutorial, we will cover the basic initialization of Steamworks in your game; as well as getting callbacks globally.</p>
						<hr/>
						<header class="major">
							<h3>Initialize Steam</h3>
						</header>
						<p>In my personal projects, I usually create an auto-load GDscript called <strong>global.gd</strong> which is added as a singleton. I then create a function called <strong>_initialize_Steam</strong> and add the code below.  This is then called from the <strong>_ready</strong> function in my <strong>global.gd</strong>:</p>
<pre><code>
func _ready() -> void:
	_initialize_Steam()

func _initialize_Steam() -> void:
	var INIT: Dictionary = Steam.steamInit()
</code></pre>
						<p>By default, <strong>Steam.steamInit()</strong> will query Steamworks for the local user's current statistics and send this data back as a callback (signal).  You can pass a boolean (false) to the function to prevent this behavior:</p>
<pre><code>
func _ready() -> void:
	_initialize_Steam()

func _initialize_Steam() -> void:
	var INIT: Dictionary = Steam.steamInit(false)
</code></pre>
						<p><strong>Steam.steamInit()</strong> will always send back a dictionary with two keys / values:
							<ul>
								<li>verbal - this is essential the verbose, text version of status</li>
								<li>status
									<ul>
										<li>1 - Successfully initialized</li>
										<li>2 - Failed to initialize (default error)</li>
										<li>20 - Steam is not running</li>
										<li>21 - User is not logged in or has no connection to Steam</li>
										<li>79 - Invalid app ID or app not installed</li>
									</ul>
								</li>
							</ul>
						</p>
						<hr/>
						<header class="major">
							<h3>Checking For Errors</h3>
						</header>
						<p>Next we will check if Steamworks was actually initialized and the user can connect to Steam:</p>
<pre><code>
func _ready() -> void:
	_initialize_Steam()

func _initialize_Steam() -> void:
	var INIT: Dictionary = Steam.steamInit()
	print("Did Steam initialize?: "+str(INIT))

	if INIT['status'] != 1:
		print("Failed to initialize Steam. "+str(INIT['verbal'])+" Shutting down...")
		get_tree().quit()
</code></pre>
						
						<p>This code will obviously shut down the game if Steam does not initialize and returns a status of anything except 1.  It will also print the verbal reason for shutting down so you know exactly why the error occurred.</p>
						<hr/>
						<header class="major">
							<h3>Getting More Data</h3>
						</header>
						<p>You can check for a few additional things at boot like:</p>
<pre><code>
var IS_ONLINE: bool = Steam.loggedOn()
var STEAM_ID: int = Steam.getSteamID()
var IS_OWNED: bool = Steam.isSubscribed()
</code></pre>
						<p>This will check if Steam is online, get the current user's Steam ID64, and check if the current user owns the game. You can also have the game turn itself off if the current user does not own the game by simply doing this:</p>
<pre><code>
if IS_OWNED == false:
	print("User does not own this game")
	get_tree().quit()
</code></pre>
						<p>There are other things you may want to do during a boot-up process after Steamworks is initialized, like getting current achievements or statistics, but we'll cover that in another tutorial.</p>
						<hr/>
						<header class="major">
							<h3>Callbacks</h3>
						</header>
						Last, but not least, anywhere you want or need to retrieve callbacks from Steam, you'll need to add this:</p>
<pre><code>
func _process(_delta: float) -> void:
	Steam.run_callbacks()
</code></pre>
						<p>I highly suggest, much like the initialization process, you put this <strong>_process</strong> function with the <strong>Steam.run_callbacks()</strong> in a global (singleton) script so it is always checking for callbacks. Though, if you want, you can put it in any <strong>_process</strong> function in any given script that might be using callback information.</p>
						<hr/>
						<header class="major">
							<h3>Altogether Now</h3>
						</header>
						<p>Putting it all together should give us something like this:</p>
<pre><code>
extends Node

# Steam variables
var IS_OWNED: bool = false
var IS_ONLINE: bool = false
var STEAM_ID: int = 0

func _ready() -> void:
	_initialize_Steam()

func _process(_delta: float) -> void:
	Steam.run_callbacks()

func _initialize_Steam() -> void:
	var INIT: Dictionary = Steam.steamInit()
	print("Did Steam initialize?: "+str(INIT))
	
	if INIT['status'] != 1:
		print("Failed to initialize Steam. "+str(INIT['verbal'])+" Shutting down...")
		get_tree().quit()
	
	IS_ONLINE = Steam.loggedOn()
	STEAM_ID = Steam.getSteamID()
	IS_OWNED = Steam.isSubscribed()
	
	# Check if account owns the game
	if IS_OWNED == false:
		logging.error("User does not own this game")
		get_tree().quit()
</code></pre>
						<hr/>
						<p>This covers the initialization and basic set-up.</p>
					</section>
				</div>
			</div>
			<!-- Sidebar -->
			<div id="sidebar">
				<div class="inner">
					<!-- Menu -->
					<nav id="menu">
						<header class="major">
							<h2>Menu</h2>
						</header>
						<ul>
							<li><a href="index.html">Introduction</a></li>
							<li>
								<span class="opener">How-To's</span>
								<ul>
									<li><a href="howto-module.html">How-To Godot 2 & 3</a></li>
									<li><a href="howto-gdnative.html">How-To GDNative</a></li>
									<li><a href="howto-server.html">How-To Server</a></li>
								</ul>
							</li>
							<li>
								<span class="opener">Functions (Module)</span>
								<ul>
									<li><a href="functions-module.html">All</a></li>
									<li><a href="functions-module.html#core">Core</a></li>
									<li><a href="functions-module.html#apps">Apps</a></li>
									<li><a href="functions-module.html#friends">Friends</a></li>
									<li><a href="functions-module.html#game-search">Game Search</a></li>
									<li><a href="functions-module.html#html-surface">HTML Surface</a></li>
									<li><a href="functions-module.html#http">HTTP</a></li>
									<li><a href="functions-module.html#input">Input</a></li>
									<li><a href="functions-module.html#inventory">Inventory</a></li>
									<li><a href="functions-module.html#matchmaking">Matchmaking</a></li>
									<li><a href="functions-module.html#matchmaking-servers">Matchmaking Servers</a></li>
									<li><a href="functions-module.html#music">Music</a></li>
									<li><a href="functions-module.html#music-remote">Music Remote</a></li>
									<li><a href="functions-module.html#networking">Networking</a></li>
									<li><a href="functions-module.html#networking-sockets">Networking Sockets</a></li>
									<li><a href="functions-module.html#networking-utils">Networking Utils</a></li>
									<li><a href="functions-module.html#parties">Parties</a></li>
									<li><a href="functions-module.html#remote-play">Remote Play</a></li>
									<li><a href="functions-module.html#remote-storage">Remote Storage</a></li>
									<li><a href="functions-module.html#screenshots">Screenshots</a></li>
									<li><a href="functions-module.html#ugc">UGC</a></li>
									<li><a href="functions-module.html#users">Users</a></li>
									<li><a href="functions-module.html#user-stats">User Stats</a></li>
									<li><a href="functions-module.html#utils">Utils</a></li>
									<li><a href="functions-module.html#video">Video</a></li>
								</ul>
							</li>
							<li>
								<span class="opener">Functions (Server)</span>
								<ul>
									<li><a href="functions-server.html">All</a></li>
									<li><a href="functions-server.html#core">Core</a></li>
									<li><a href="functions-server.html#apps">Apps</a></li>
									<li><a href="functions-server.html#http">HTTP</a></li>
									<li><a href="functions-server.html#inventory">Inventory</a></li>
									<li><a href="functions-server.html#networking">Networking</a></li>
									<li><a href="functions-server.html#server">Server</a></li>
									<li><a href="functions-server.html#server-stats">Server Stats</a></li>
									<li><a href="functions-server.html#ugc">UGC</a></li>
									<li><a href="functions-server.html#utils">Utils</a></li>
								</ul>
							</li>
							<li>
								<span class="opener">Signals</span>
								<ul>
									<li><a href="signals-modules.html">Signals (Module)</a></li>
									<li><a href="signals-server.html">Signals (Server)</a></li>
								</ul>
							</li>
							<li>
								<span class="opener">Tutorials</span>
								<ul>
									<li><a href="tutorials-initializing.html">Initializing Steam</a></li>
									<li><a href="tutorials-stats-achievements.html">Stats and Achievements</a></li>
									<li><a href="tutorials-avatars.html">Avatars</a></li>
									<li><a href="tutorials-lobbies-p2p.html">Lobbies / P2P Networking</a></li>
									<li><a href="tutorials-authentication.html">Authentication</a></li>
									<li><a href="tutorials-mac-export.html">Mac Exporting</a></li>
									<li><a href="tutorials-achievement-icons.html">Achievement Icons</a></li>
									<li><a href="tutorials-rich-presence.html">Rich Presence</a></li>
									<li><a href="tutorials-linux-caveats.html">Linux Caveats</a></li>
									<li><a href="tutorials-exporting-shipping.html">Exporting and Shipping</a></li>
								</ul>
							</li>
							<li><a href="games.html">Games Using GodotSteam</a></li>
							<li><a href="todo.html">To-Do</a></li>
							<li>
								<span class="opener">Change Log</span>
								<ul>
									<li><a href="changelog-godot3.html">Godot 3.x</a></li>
									<li><a href="changelog-godot2.html">Godot 2.x</a></li>
									<li><a href="changelog-gdnative.html">GDNative</a></li>
									<li><a href="changelog-server.html">Server</a></li>
								</ul>
							</li>
							<li><a href="contributors.html">Contributors</a></li>
						</ul>
					</nav>
					<section>
						<header class="major">
							<h2>Stuck? Need Help?</h2>
						</header>
						<p>Navigating Steamworks can be confusing sometimes. If you run across any problems, there's a few ways to get it ironed out.</p>
						<ul class="actions stacked">
							<li><a class="button primary" href="mailto:godotsteam@coaguco.com" target="_blank"><i class="fas fa-envelope-open-text"></i>&nbsp;&nbsp;Send A Support E-Mail</a></li>
							<li><a class="button primary" href="https://discord.gg/SJRSq6K" target="_blank"><i class="fab fa-discord"></i>&nbsp;&nbsp;Chat With Us On Discord</a></li>
						</ul>
					</section>
					<section>
						<header class="major">
							<h2>Donate</h2>
						</header>
						<p>If C++ is not your bag but you're feeling generous, you can support the project with your pocket change using either button below!</p>
						<ul class="actions stacked">
							<li><a class="button primary" href="https://patreon.com/coaguco" target="_blank"><i class="fab fa-patreon"></i>&nbsp;&nbsp;Donate with Patreon</a></li>
							<li><a class="button primary" href="https://www.paypal.me/sithlordkyle" target="_blank"><i class="fab fa-paypal"></i>&nbsp;&nbsp;Donate with Paypal</a></li>
						</ul>
					</section>
					<footer>
						<ul class="actions stacked">
							<li>Godot Engine by <a href="https://godotengine.org">Juan Linietsky, Ariel Manzur and contributors</a></li>
							<li>Steamworks API by <a href="https://valvesoftware.com">Valve Corporation</a></li>
							<li>GodotSteam by <a href="https://coaguco.com">GP Garcia</a> and contributors</li>
							<li>Site Template by <a href="https://html5up.net">HTML5UP</a></li>
						</ul>
					</footer>
					<footer id="footer" class="copyright">
						2021 &copy; GP Garcia & CoaguCo Industries
					</footer>
				</div>
			</div>
		</div>
		<!-- Scripts -->
		<script src="js/jquery.min.js"></script>
		<script src="js/browser.min.js"></script>
		<script src="js/breakpoints.min.js"></script>
		<script src="js/util.js"></script>
		<script src="js/main.js"></script>
	</body>
</html>