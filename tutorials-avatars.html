<!DOCTYPE HTML>
<html>
	<head>
		<title>GodotSteam - A Steamworks Module For Godot Engine | By Gramps | GitHub</title>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="css/main.css" />
		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous" />
		<!--[if lt IE 9]>
			<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
		<!--[if lt IE 8]>
		<link rel="stylesheet" href="{{ '/css/ie.css' | relative_url }}">
		<![endif]-->
	</head>
	<body class="is-preload">
		<!-- Wrapper -->
		<div id="wrapper">
			<!-- Main -->
			<div id="main">
				<div class="inner">
					<!-- Header -->
					<header id="header">
						<a href="index.html" class="logo"><strong>GodotSteam</strong> A Steamworks module for Godot Engine</a>
					</header>
					<!-- Section -->
					<section>
						<header class="main">
							<h1>Tutorials - Avatars</h1>
						</header>
						<p>You may want to get the current player's avatar, or someone else's, and display it in your game.  This tutorial will walk you through the basics of avatar retrieval and passing it to a sprite so you can use it.
						<hr/>
						<header class="major">
							<h3>Request The Avatar</h3>
						</header>
						<p>Getting the avatar data is incredibly easy. Just use the following line:</p>
<pre><code>
Steam.getPlayerAvatar(Steam.AVATAR_MEDIUM)
</code></pre>
						<p>You may pass it either <strong>Steam.AVATAR_SMALL</strong>, <strong>Steam.AVATAR_MEDIUM</strong>, or <strong>Steam.AVATAR_LARGE</strong>; their numerical counterparts (1, 2, or 3) will also work.  Additionally you can pass along a Steam ID64 to get a specific user or, if no ID is provided, it will get the current user by default.</p>
						<hr/>
						<header class="major">
							<h3>Retrieve And Create The Image</h3>
						</header>
						<p>To retrieve the avatar data buffer, you'll need to hook the signal for the callback:</p>
<pre><code>
Steam.connect("avatar_loaded", self, "loaded_avatar")
</code></pre>
						<p>This will return the user's Steam ID, the avatar's size, and the data buffer for rendering the image.  If you have read the <a href="tutorials-achievement-icons.html">Achievement Icons tutorial</a>, this should all look pretty familiar.  Our <strong>loaded_avatar</strong> function will look something like this:</p>
<pre><code>
func loaded_avatar(id: int, size: int, buffer: PoolByteArray) -> void:
	print("Avatar for user: "+str(id))
	print("Size: "+str(size))
	# Create a new image and texture to fill out
	var AVATAR: Image = Image.new()
	var AVATAR_TEXTURE: ImageTexture = ImageTexture.new()
	AVATAR.create(size, size, false, Image.FORMAT_RGBAF)

	# Lock the image and fill the pixels from the data buffer
	AVATAR.lock()
	for y in range(0, size):
		for x in range(0, size):
			var pixel: int = 4 * (x + y * size)
			var r: float = float(buffer[pixel]) / 255
			var g: float = float(buffer[pixel+1]) / 255
			var b: float = float(buffer[pixel+2]) / 255
			var a: float = float(buffer[pixel+3]) / 255
			AVATAR.set_pixel(x, y, Color(r, g, b, a))
	AVATAR.unlock()

	# Now apply the texture
	AVATAR_TEXTURE.create_from_image(AVATAR)

	# For our purposes, set a sprite with the avatar texture
	$Sprite.set_texture(AVATAR_TEXTURE)
</code></pre>
					<p>Naturally that texture could be applied elsewhere, depending on where you place this function.</p>
					<hr/>
					<header class="major">
						<h3>Another Example</h3>
					</header>
					<p>A longer, but similar way to get the end result could look like this:</p>
<pre><code>
# Request one or all sizes
var HANDLE1: int = Steam.getSmallFriendAvatar(steamID)
var HANDLE2: int = Steam.getMediumFriendAvatar(steamID)
var HANDLE3: int = Steam.getLargeFriendAvatar(steamID)

# Using the small avatar handle
var IMAGE: int = Steam.getImageSize(HANDLE1)
var IMAGE_DATA: Dictionary = Steam.getImageRGBA(HANDLE1)

# Now create the avatar like before
var AVATAR: Image = Image.new()
var AVATAR_TEXTURE: ImageTexture = ImageTexture.new()
AVATAR.create(IMAGE['width'], IMAGE['height'], false, Image.FORMAT_RGBAF)

# Lock the image and fill the pixels from the data buffer
AVATAR.lock()
for y in range(0, size):
	for x in range(0, size):
		var pixel: int = 4 * (x + y * size)
		var r: float = float(IMAGE_DATA['buffer'][pixel]) / 255
		var g: float = float(IMAGE_DATA['buffer'][pixel+1]) / 255
		var b: float = float(IMAGE_DATA['buffer'][pixel+2]) / 255
		var a: float = float(IMAGE_DATA['buffer'][pixel+3]) / 255
		AVATAR.set_pixel(x, y, Color(r, g, b, a))
AVATAR.unlock()

# Now apply the texture
AVATAR_TEXTURE.create_from_image(AVATAR)

# For our purposes, set a sprite with the avatar texture
$Sprite.set_texture(AVATAR_TEXTURE)
</code></pre>
						<hr/>
						<p>That covers the basics of getting player avatars. You can find this tutorial in the <a href="https://github.com/Gramps/GodotSteam/tree/example" target="_blank">Example branch of the repo</a> if you want to see it in action.</p></p>
					</section>
				</div>
			</div>
			<!-- Sidebar -->
			<div id="sidebar">
				<div class="inner">
					<!-- Menu -->
					<nav id="menu">
						<header class="major">
							<h2>Menu</h2>
						</header>
						<ul>
							<li><a href="index.html">Introduction</a></li>
							<li>
								<span class="opener">How-To's</span>
								<ul>
									<li><a href="howto-module.html">How-To Godot 2 & 3</a></li>
									<li><a href="howto-gdnative.html">How-To GDNative</a></li>
									<li><a href="howto-server.html">How-To Server</a></li>
								</ul>
							</li>
							<li>
								<span class="opener">Functions (Module)</span>
								<ul>
									<li><a href="functions-module.html">All</a></li>
									<li><a href="functions-module.html#core">Core</a></li>
									<li><a href="functions-module.html#apps">Apps</a></li>
									<li><a href="functions-module.html#friends">Friends</a></li>
									<li><a href="functions-module.html#game-search">Game Search</a></li>
									<li><a href="functions-module.html#html-surface">HTML Surface</a></li>
									<li><a href="functions-module.html#http">HTTP</a></li>
									<li><a href="functions-module.html#input">Input</a></li>
									<li><a href="functions-module.html#inventory">Inventory</a></li>
									<li><a href="functions-module.html#matchmaking">Matchmaking</a></li>
									<li><a href="functions-module.html#matchmaking-servers">Matchmaking Servers</a></li>
									<li><a href="functions-module.html#music">Music</a></li>
									<li><a href="functions-module.html#music-remote">Music Remote</a></li>
									<li><a href="functions-module.html#networking">Networking</a></li>
									<li><a href="functions-module.html#networking-sockets">Networking Sockets</a></li>
									<li><a href="functions-module.html#networking-utils">Networking Utils</a></li>
									<li><a href="functions-module.html#parties">Parties</a></li>
									<li><a href="functions-module.html#remote-play">Remote Play</a></li>
									<li><a href="functions-module.html#remote-storage">Remote Storage</a></li>
									<li><a href="functions-module.html#screenshots">Screenshots</a></li>
									<li><a href="functions-module.html#ugc">UGC</a></li>
									<li><a href="functions-module.html#users">Users</a></li>
									<li><a href="functions-module.html#user-stats">User Stats</a></li>
									<li><a href="functions-module.html#utils">Utils</a></li>
									<li><a href="functions-module.html#video">Video</a></li>
								</ul>
							</li>
							<li>
								<span class="opener">Functions (Server)</span>
								<ul>
									<li><a href="functions-server.html">All</a></li>
									<li><a href="functions-server.html#core">Core</a></li>
									<li><a href="functions-server.html#apps">Apps</a></li>
									<li><a href="functions-server.html#http">HTTP</a></li>
									<li><a href="functions-server.html#inventory">Inventory</a></li>
									<li><a href="functions-server.html#networking">Networking</a></li>
									<li><a href="functions-server.html#server">Server</a></li>
									<li><a href="functions-server.html#server-stats">Server Stats</a></li>
									<li><a href="functions-server.html#ugc">UGC</a></li>
									<li><a href="functions-server.html#utils">Utils</a></li>
								</ul>
							</li>
							<li>
								<span class="opener">Signals</span>
								<ul>
									<li><a href="signals-modules.html">Signals (Module)</a></li>
									<li><a href="signals-server.html">Signals (Server)</a></li>
								</ul>
							</li>
							<li>
								<span class="opener">Tutorials</span>
								<ul>
									<li><a href="tutorials-initializing.html">Initializing Steam</a></li>
									<li><a href="tutorials-stats-achievements.html">Stats and Achievements</a></li>
									<li><a href="tutorials-leaderboards.html">Leaderboards</a></li>
									<li><a href="tutorials-avatars.html">Avatars</a></li>
									<li><a href="tutorials-lobbies-p2p.html">Lobbies / P2P Networking</a></li>
									<li><a href="tutorials-authentication.html">Authentication</a></li>
									<li><a href="tutorials-mac-export.html">Mac Exporting</a></li>
									<li><a href="tutorials-achievement-icons.html">Achievement Icons</a></li>
									<li><a href="tutorials-rich-presence.html">Rich Presence</a></li>
									<li><a href="tutorials-linux-caveats.html">Linux Caveats</a></li>
									<li><a href="tutorials-exporting-shipping.html">Exporting and Shipping</a></li>
								</ul>
							</li>
							<li><a href="games.html">Games Using GodotSteam</a></li>
							<li><a href="todo.html">To-Do</a></li>
							<li>
								<span class="opener">Change Log</span>
								<ul>
									<li><a href="changelog-godot3.html">Godot 3.x</a></li>
									<li><a href="changelog-godot2.html">Godot 2.x</a></li>
									<li><a href="changelog-gdnative.html">GDNative</a></li>
									<li><a href="changelog-server.html">Server</a></li>
								</ul>
							</li>
							<li><a href="contributors.html">Contributors</a></li>
						</ul>
					</nav>
					<section>
						<header class="major">
							<h2>Stuck? Need Help?</h2>
						</header>
						<p>Navigating Steamworks can be confusing sometimes. If you run across any problems, there's a few ways to get it ironed out.</p>
						<ul class="actions stacked">
							<li><a class="button primary" href="mailto:godotsteam@coaguco.com" target="_blank"><i class="fas fa-envelope-open-text"></i>&nbsp;&nbsp;Send A Support E-Mail</a></li>
							<li><a class="button primary" href="https://discord.gg/SJRSq6K" target="_blank"><i class="fab fa-discord"></i>&nbsp;&nbsp;Chat With Us On Discord</a></li>
						</ul>
					</section>
					<section>
						<header class="major">
							<h2>Donate</h2>
						</header>
						<p>If C++ is not your bag but you're feeling generous, you can support the project with your pocket change using either button below!</p>
						<ul class="actions stacked">
							<li><a class="button primary" href="https://patreon.com/coaguco" target="_blank"><i class="fab fa-patreon"></i>&nbsp;&nbsp;Donate with Patreon</a></li>
							<li><a class="button primary" href="https://www.paypal.me/sithlordkyle" target="_blank"><i class="fab fa-paypal"></i>&nbsp;&nbsp;Donate with Paypal</a></li>
						</ul>
					</section>
					<footer>
						<ul class="actions stacked">
							<li>Godot Engine by <a href="https://godotengine.org">Juan Linietsky, Ariel Manzur and contributors</a></li>
							<li>Steamworks API by <a href="https://valvesoftware.com">Valve Corporation</a></li>
							<li>GodotSteam by <a href="https://coaguco.com">GP Garcia</a> and contributors</li>
							<li>Site Template by <a href="https://html5up.net">HTML5UP</a></li>
						</ul>
					</footer>
					<footer id="footer" class="copyright">
						2021 &copy; GP Garcia & CoaguCo Industries
					</footer>
				</div>
			</div>
		</div>
		<!-- Scripts -->
		<script src="js/jquery.min.js"></script>
		<script src="js/browser.min.js"></script>
		<script src="js/breakpoints.min.js"></script>
		<script src="js/util.js"></script>
		<script src="js/main.js"></script>
	</body>
</html>