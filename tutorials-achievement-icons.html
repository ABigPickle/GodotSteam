<!DOCTYPE HTML>
<html>
	<head>
		<title>GodotSteam - A Steamworks Module For Godot Engine | By Gramps | GitHub</title>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="css/main.css" />
		<link rel="stylesheet" href="css/font-awesome.min.css" />
		<!--[if lt IE 9]>
			<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
		<!--[if lt IE 8]>
		<link rel="stylesheet" href="{{ '/css/ie.css' | relative_url }}">
		<![endif]-->
	</head>
	<body class="is-preload">
		<!-- Wrapper -->
		<div id="wrapper">
			<!-- Main -->
			<div id="main">
				<div class="inner">
					<!-- Header -->
					<header id="header">
						<a href="index.html" class="logo"><strong>GodotSteam</strong> A Steamworks module for Godot Engine</a>
					</header>
					<!-- Section -->
					<section>
						<header class="main">
							<h1>Tutorials - Achievement Icons</h1>
						</header>
						<p>This quick tutorial will cover to how get achievement icons from Steam's servers.  It was made because there are some extra steps folks need to use to render the images and it may not be very clear otherwise.</p>
						<p>First you will need to request the icon handle by using the achievement's Steamworks name you set in the back-end:</p>
<pre><code>
var HANDLE = Steam.getAchievementIcon("achievement name")
</code></pre><br/>
						<p>This handle is used to get the image information.  This would be passed to a buffer variable like so:</p>
<pre><code>
var BUFFER = Steam.getImageRGBA(HANDLE)
</code></pre><br/>
						<p>This buffer is a contains the actual image data for our icon but is tricky to use.  Before that, we will need to create a new image and texture to attach to a sprite later on:
<pre><code>
var SIZE = 32
var ICON = Image.new()
var ICON_TEXTURE = ImageTexture.new()
ICON.create(SIZE, SIZE, false, Image.FORMAT_RGBAF)
</code></pre><br/>
						<p>The size variable can be whatever you want; for our example, we will use 32 (32 pixels by 32 pixels).</p>
						<p>Now let's go back and parts that buffer data:</p>
<pre><code>
ICON.lock()
for y in range(0, SIZE):
	for x in range(0, SIZE):
		var pixel = 4 * (x + y * SIZE)
		var r = float(BUFFER['buffer'][pixel]) / 255
		var g = float(BUFFER['buffer'][pixel+1]) / 255
		var b = float(BUFFER['buffer'][pixel+2]) / 255
		var a = float(BUFFER['buffer'][pixel+3]) / 255
		ICON.set_pixel(x, y, Color(r, g, b, a))
ICON.unlock()
</code></pre><br/>
						<p>Now that all the pixels are set in the right places, we can create the texture:</p>
<pre><code>	
ICON_TEXTURE.create_from_image(ICON)
</code></pre><br/>
						<p>And finally we can display the icon.  Using the previous ICON_TEXTURE, we can place this icon on our waiting sprite:
<pre><code>
get_node("Sprite").set_texture(ICON_TEXTURE)
</code></pre><br/>	
						<p>Our complete example should look something like this:</p>
<pre><code>
# Set up some icon variables
var SIZE = 32

# Get the image's handle
var HANDLE = Steam.getAchievementIcon("ACH_WIN_ONE_GAME")

# Get the image data
var BUFFER = Steam.getImageRGBA(HANDLE)

#Create the image and texture for loading
var ICON = Image.new()
var ICON_TEXTURE = ImageTexture.new()
ICON.create(SIZE, SIZE, false, Image.FORMAT_RGBAF)

# Lock and draw the image
ICON.lock()
for y in range(0, SIZE):
	for x in range(0, SIZE):
		var pixel = 4 * (x + y * SIZE)
		var r = float(BUFFER['buffer'][pixel]) / 255
		var g = float(BUFFER['buffer'][pixel+1]) / 255
		var b = float(BUFFER['buffer'][pixel+2]) / 255
		var a = float(BUFFER['buffer'][pixel+3]) / 255
		ICON.set_pixel(x, y, Color(r, g, b, a))
ICON.unlock()

# Apply it to the texture
ICON_TEXTURE.create_from_image(ICON)

# Display it on a sprite node
get_node("Sprite").set_texture(ICON_TEXTURE)
</code></pre><br/>
						<p>And that's how you display an achievement icon.  You can find this tutorial in the <a href="https://github.com/Gramps/GodotSteam/tree/example" target="_blank">Example branch of the repo</a> too.</p>
					</section>
					<footer id="footer">
						Godot Engine by <a href="https://godotengine.org">Juan Linietsky, Ariel Manzur and contributors</a><br />
						Steamworks API by <a href="https://valvesoftware.com">Valve Corporation</a><br />
						GodotSteam by <a href="https://coaguco.com">GP Garcia</a> and contributors<br />
						Site Template by <a href="https://html5up.net">HTML5UP</a>
					</footer>
				</div>
			</div>
			<!-- Sidebar -->
			<div id="sidebar">
				<div class="inner">
					<!-- Menu -->
					<nav id="menu">
						<header class="major">
							<h2>Menu</h2>
						</header>
						<ul>
							<li><a href="index.html">Introduction</a></li>
							<li>
								<span class="opener">How-To's</span>
								<ul>
									<li><a href="howto-module.html">How-To Godot 2 & 3</a></li>
									<li><a href="howto-gdnative.html">How-To GDNative</a></li>
									<li><a href="howto-server.html">How-To Server</a></li>
								</ul>
							</li>
							<li>
								<span class="opener">Functions</span>
								<ul>
									<li><a href="functions-module.html">Functions (Module) </a></li>
									<li><a href="functions-server.html">Functions (Server)</a></li>
								</ul>
							</li>
							<li>
								<span class="opener">Signals</span>
								<ul>
									<li><a href="signals-modules.html">Signals (Module)</a></li>
									<li><a href="signals-server.html">Signals (Server)</a></li>
								</ul>
							</li>
							<li>
								<span class="opener">Tutorials</span>
								<ul>
									<li><a href="tutorials-initializing.html">Initializing Steam</a></li>
									<li><a href="tutorials-stats-achievements.html">Stats and Achievements</a></li>
									<li><a href="tutorials-avatars.html">Avatars</a></li>
									<li><a href="tutorials-lobbies-p2p.html">Lobbies / P2P Networking</a></li>
									<li><a href="tutorials-mac-export.html">Mac Exporting</a></li>
									<li><a href="tutorials-achievement-icons.html">Achievment Icons</a></li>
									<li><a href="tutorials-rich-presence.html">Rich Presence</a></li>
									<li><a href="tutorials-linux-caveats.html">Linux Caveats</a></li>
								</ul>
							</li>
							<li><a href="games.html">Games Using GodotSteam</a></li>
							<li><a href="todo.html">To-Do</a></li>
							<li><a href="changelog.html">Change Log</a></li>
							<li><a href="contributors.html">Contributors / Donate</a></li>
						</ul>
					</nav>
				</div>
			</div>
		</div>
		<!-- Scripts -->
		<script src="js/jquery.min.js"></script>
		<script src="js/browser.min.js"></script>
		<script src="js/breakpoints.min.js"></script>
		<script src="js/util.js"></script>
		<script src="js/main.js"></script>
	</body>
</html>