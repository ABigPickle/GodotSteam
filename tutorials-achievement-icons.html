<!DOCTYPE HTML>
<html>
	<head>
		<title>GodotSteam - A Steamworks Module For Godot Engine | By Gramps | GitHub</title>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="css/main.css" />
		<link rel="stylesheet" href="css/font-awesome.min.css" />
		<!--[if lt IE 9]>
			<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
		<!--[if lt IE 8]>
		<link rel="stylesheet" href="{{ '/css/ie.css' | relative_url }}">
		<![endif]-->
	</head>
	<body class="is-preload">
		<!-- Wrapper -->
		<div id="wrapper">
			<!-- Main -->
			<div id="main">
				<div class="inner">
					<!-- Header -->
					<header id="header">
						<a href="index.html" class="logo"><strong>GodotSteam</strong> A Steamworks module for Godot Engine</a>
					</header>
					<!-- Section -->
					<section>
						<header class="main">
							<h1>Tutorials - Achievement Icons</h1>
						</header>
						<p>This quick tutorial will cover to how get achievement icons from Steam's servers.  It was made because there are some extra steps folks need to use to render the images and it may not be very clear otherwise.</p>
						<header class="major">
							<h3>Getting The Handle And Buffer</h3>
						</header>
						<p>First you will need to request the icon handle by using the achievement's name you set in the Steamworks back-end:</p>
<pre><code>
var HANDLE: int = Steam.getAchievementIcon("achievement name")
</code></pre>
						<p>This handle is used to get the image information.  This would be passed to a buffer variable like so:</p>
<pre><code>
var BUFFER: Dictionary = Steam.getImageRGBA(HANDLE)
</code></pre>
						<header class="major">
							<h3>Creating The Image</h3>
						</header>
						<p>This buffer contains the actual image data for our icon but is rather tricky to use.  However, before that we will need to create a new image and texture to attach to a sprite later on:
<pre><code>
var SIZE: int = 32
var ICON: Image = Image.new()
var ICON_TEXTURE: ImageTexture = ImageTexture.new()
ICON.create(SIZE, SIZE, false, Image.FORMAT_RGBAF)
</code></pre>
						<p>The size variable can be whatever you want; for our example we will use 32 (32 pixels by 32 pixels).</p>
						<p>Now let's go back and parse that buffer data:</p>
<pre><code>
ICON.lock()
for y in range(0, SIZE):
	for x in range(0, SIZE):
		var pixel: int = 4 * (x + y * SIZE)
		var r: float = float(BUFFER['buffer'][pixel]) / 255
		var g: float = float(BUFFER['buffer'][pixel+1]) / 255
		var b: float = float(BUFFER['buffer'][pixel+2]) / 255
		var a: float = float(BUFFER['buffer'][pixel+3]) / 255
		ICON.set_pixel(x, y, Color(r, g, b, a))
ICON.unlock()
</code></pre>
						<p>Now that all the pixels are set in the right places, we can create the texture:</p>
<pre><code>	
ICON_TEXTURE.create_from_image(ICON)
</code></pre>
						<p>Finally we can display the icon.  Using the previous ICON_TEXTURE, we can place this icon on our waiting sprite:
<pre><code>
get_node("Sprite").set_texture(ICON_TEXTURE)
</code></pre>
						<header class="major">
							<h3>All-In-One</h3>
						</header>
						<p>Our complete example should look something like this:</p>
<pre><code>
# Set up some icon variables
var SIZE: int = 32

# Get the image's handle
var HANDLE: int = Steam.getAchievementIcon("ACH_WIN_ONE_GAME")

# Get the image data
var BUFFER: Dictionary = Steam.getImageRGBA(HANDLE)

#Create the image and texture for loading
var ICON: Image = Image.new()
var ICON_TEXTURE: ImageTexture = ImageTexture.new()
ICON.create(SIZE, SIZE, false, Image.FORMAT_RGBAF)

# Lock and draw the image
ICON.lock()
for y in range(0, SIZE):
	for x in range(0, SIZE):
		var pixel: int = 4 * (x + y * SIZE)
		var r: float = float(BUFFER['buffer'][pixel]) / 255
		var g: float = float(BUFFER['buffer'][pixel+1]) / 255
		var b: float = float(BUFFER['buffer'][pixel+2]) / 255
		var a: float = float(BUFFER['buffer'][pixel+3]) / 255
		ICON.set_pixel(x, y, Color(r, g, b, a))
ICON.unlock()

# Apply it to the texture
ICON_TEXTURE.create_from_image(ICON)

# Display it on a sprite node
get_node("Sprite").set_texture(ICON_TEXTURE)
</code></pre>
						<hr/>
						<p>And that's how you display an achievement icon.  You can find this tutorial in the <a href="https://github.com/Gramps/GodotSteam/tree/example" target="_blank">Example branch of the repo</a> if you want to see it in action.</p>
					</section>
				</div>
			</div>
			<!-- Sidebar -->
			<div id="sidebar">
				<div class="inner">
					<!-- Menu -->
					<nav id="menu">
						<header class="major">
							<h2>Menu</h2>
						</header>
						<ul>
							<li><a href="index.html">Introduction</a></li>
							<li>
								<span class="opener">How-To's</span>
								<ul>
									<li><a href="howto-module.html">How-To Godot 2, 3, 4</a></li>
									<li><a href="howto-gdnative.html">How-To GDNative</a></li>
								</ul>
							</li>
							<li>
								<span class="opener">Functions (Module)</span>
								<ul>
									<li><a href="functions-module.html">All</a></li>
									<li><a href="functions-module.html#core">Core</a></li>
									<li><a href="functions-module.html#apps">Apps</a></li>
									<li><a href="functions-module.html#friends">Friends</a></li>
									<li><a href="functions-module.html#game-search">Game Search</a></li>
									<li><a href="functions-module.html#html-surface">HTML Surface</a></li>
									<li><a href="functions-module.html#http">HTTP</a></li>
									<li><a href="functions-module.html#input">Input</a></li>
									<li><a href="functions-module.html#inventory">Inventory</a></li>
									<li><a href="functions-module.html#matchmaking">Matchmaking</a></li>
									<li><a href="functions-module.html#matchmaking-servers">Matchmaking Servers</a></li>
									<li><a href="functions-module.html#music">Music</a></li>
									<li><a href="functions-module.html#music-remote">Music Remote</a></li>
									<li><a href="functions-module.html#networking">Networking</a></li>
									<li><a href="functions-module.html#networking-sockets">Networking Sockets</a></li>
									<li><a href="functions-module.html#networking-utils">Networking Utils</a></li>
									<li><a href="functions-module.html#parties">Parties</a></li>
									<li><a href="functions-module.html#remote-play">Remote Play</a></li>
									<li><a href="functions-module.html#remote-storage">Remote Storage</a></li>
									<li><a href="functions-module.html#screenshots">Screenshots</a></li>
									<li><a href="functions-module.html#server">Server</a></li>
									<li><a href="functions-module.html#server-stats">Server Stats</a></li>
									<li><a href="functions-module.html#ugc">UGC</a></li>
									<li><a href="functions-module.html#users">Users</a></li>
									<li><a href="functions-module.html#user-stats">User Stats</a></li>
									<li><a href="functions-module.html#utils">Utils</a></li>
									<li><a href="functions-module.html#video">Video</a></li>
								</ul>
							</li>
							<li><a href="signals-modules.html">Signals</a></li>
							<li>
								<span class="opener">Godot 3.x Tutorials</span>
								<ul>
									<li><a href="tutorials-initializing.html">Initializing Steam</a></li>
									<li><a href="tutorials-stats-achievements.html">Stats and Achievements</a></li>
									<li><a href="tutorials-leaderboards.html">Leaderboards</a></li>
									<li><a href="tutorials-avatars.html">Avatars</a></li>
									<li><a href="tutorials-lobbies-p2p.html">Lobbies / P2P Networking</a></li>
									<li><a href="tutorials-authentication.html">Authentication</a></li>
									<li><a href="tutorials-mac-export.html">Mac Exporting</a></li>
									<li><a href="tutorials-achievement-icons.html">Achievement Icons</a></li>
									<li><a href="tutorials-auto-matchmaking.html">Auto-Matchmaking</a></li>
									<li><a href="tutorials-rich-presence.html">Rich Presence</a></li>
									<li><a href="tutorials-linux-caveats.html">Linux Caveats</a></li>
									<li><a href="tutorials-exporting-shipping.html">Exporting and Shipping</a></li>
								</ul>
							</li>
							<li><a href="games.html">Games Using GodotSteam</a></li>
							<li><a href="todo.html">To-Do</a></li>
							<li>
								<span class="opener">Change Log</span>
								<ul>
									<li><a href="changelog-godot4.html">Godot 4.x</a></li>
									<li><a href="changelog-godot3.html">Godot 3.x</a></li>
									<li><a href="changelog-godot2.html">Godot 2.x</a></li>
									<li><a href="changelog-gdnative.html">GDNative</a></li>
								</ul>
							</li>
							<li><a href="contributors.html">Contributors</a></li>
						</ul>
					</nav>
					<section>
						<header class="major">
							<h2>Stuck? Need Help?</h2>
						</header>
						<p>Navigating Steamworks can be confusing sometimes. If you run across any problems, there's a few ways to get it ironed out.</p>
						<ul class="actions stacked">
							<li><a class="button primary" href="mailto:godotsteam@coaguco.com" target="_blank"><i class="fas fa-envelope-open-text"></i>&nbsp;&nbsp;Send A Support E-Mail</a></li>
							<li><a class="button primary" href="https://discord.gg/SJRSq6K" target="_blank"><i class="fab fa-discord"></i>&nbsp;&nbsp;Chat With Us On Discord</a></li>
						</ul>
					</section>
					<section>
						<header class="major">
							<h2>Donate</h2>
						</header>
						<p>If C++ is not your bag but you're feeling generous, you can support the project with your pocket change using either button below!</p>
						<ul class="actions stacked">
							<li><a class="button primary" href="https://patreon.com/coaguco" target="_blank"><i class="fab fa-patreon"></i>&nbsp;&nbsp;Donate with Patreon</a></li>
							<li><a class="button primary" href="https://www.paypal.me/sithlordkyle" target="_blank"><i class="fab fa-paypal"></i>&nbsp;&nbsp;Donate with Paypal</a></li>
						</ul>
					</section>
					<footer>
						<ul class="actions stacked">
							<li>Godot Engine by <a href="https://godotengine.org">Juan Linietsky, Ariel Manzur and contributors</a></li>
							<li>Steamworks API by <a href="https://valvesoftware.com">Valve Corporation</a></li>
							<li>GodotSteam by <a href="https://coaguco.com">GP Garcia</a> and contributors</li>
							<li>Site Template by <a href="https://html5up.net">HTML5UP</a></li>
						</ul>
					</footer>
					<footer id="footer" class="copyright">
						2021 &copy; GP Garcia & CoaguCo Industries
					</footer>
				</div>
			</div>
		</div>
		<!-- Scripts -->
		<script src="js/jquery.min.js"></script>
		<script src="js/browser.min.js"></script>
		<script src="js/breakpoints.min.js"></script>
		<script src="js/util.js"></script>
		<script src="js/main.js"></script>
	</body>
</html>