<!DOCTYPE HTML>
<html>
	<head>
		<title>GodotSteam - A Steamworks Module For Godot Engine | By Gramps | GitHub</title>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="css/main.css" />
		<link rel="stylesheet" href="css/font-awesome.min.css" />
		<!--[if lt IE 9]>
			<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
		<!--[if lt IE 8]>
		<link rel="stylesheet" href="{{ '/css/ie.css' | relative_url }}">
		<![endif]-->
	</head>
	<body class="is-preload">
		<!-- Wrapper -->
		<div id="wrapper">
			<!-- Main -->
			<div id="main">
				<div class="inner">
					<!-- Header -->
					<header id="header">
						<a href="index.html" class="logo"><strong>GodotSteam</strong> A Steamworks module for Godot Engine</a>
					</header>
					<!-- Section -->
					<section>
						<header class="main">
							<h1>Tutorials - Initializing Steam</h1>
						</header>
						<p>I usually create an auto-load GDscript called global.gd which is added as a singleton. I add this code to the _ready() function:</p>
<pre><code>
var INIT = Steam.steamInit()
print("Did Steam initialize?: "+str(INIT))
	
if INIT['status'] != 1:
	print("Failed to initialize Steam. "+str(INIT['verbal'])+" Shutting down...")
	get_tree().quit()
</code></pre><br/>
						<p>This code will obviously shut down the game if Steam does not initialize, as well as print the verbal reason for shutting down. The function <strong>Steam.steamInit()</strong> will send back a dictionary with two keys / values:
							<ul>
								<li>verbal - this is essential the verbose version of status</li>
								<li>status
									<ul>
										<li>1 - Successfully initialized</li>
										<li>2 - Failed to initialize (default error)</li>
										<li>20 - Steam is not running</li>
										<li>21 - User is not logged in or has no connection to Steam</li>
										<li>79 - Invalid app ID or app not installed</li>
									</ul>
								</li>
							</ul>
						</p>
						<p>You can check for a few additional things at boot like:</p>
<pre><code>
var ONLINE = Steam.loggedOn()
var STEAM_ID = Steam.getSteamID()
var OWNED = Steam.isSubscribed()
</code></pre><br/>
						<p>This will check if Steam is online, get the current user's Steam ID64, and check if the current user owns the game. You can also have the game turn itself off if the current user does not own the game by simply doing this:</p>
<pre><code>
if OWNED == false:
	print("User does not own this game")
	get_tree().quit()
</code></pre><br/>
						<p>There are other things you may want to do during a boot-up process after Steamworks is initialized, like getting current achievements or statistics, and we'll cover that next. Last, but not least, anywhere you want or need to retrieve callbacks from Steam, you'll need to add this:</p>
<pre><code>
func _process(delta):
	Steam.run_callbacks()
</code></pre><br/>
						<p>Putting it all together should give us something like this:</p>
<pre><code>
extends Node

# Steam variables
var OWNED = false
var ONLINE = false
var STEAM_ID = 0

func _ready():
	var INIT = Steam.steamInit()
	print("Did Steam initialize?: "+str(INIT))
	
	if INIT['status'] != 1:
		print("Failed to initialize Steam. "+str(INIT['verbal'])+" Shutting down...")
		get_tree().quit()
	
	ONLINE = Steam.loggedOn()
	STEAM_ID = Steam.getSteamID()
	OWNED = Steam.isSubscribed()
	
	# Check if account owns the game
	if OWNED == false:
		logging.error("User does not own this game")
		get_tree().quit()

func _process(delta):
	Steam.run_callbacks()
</code></pre>
						<p>This covers the initialization and basic set-up.</p>
					</section>
					<footer id="footer">
						Godot Engine by <a href="https://godotengine.org">Juan Linietsky, Ariel Manzur and contributors</a><br />
						Steamworks API by <a href="https://valvesoftware.com">Valve Corporation</a><br />
						GodotSteam by <a href="https://coaguco.com">GP Garcia</a> and contributors<br />
						Site Template by <a href="https://html5up.net">HTML5UP</a>
					</footer>
				</div>
			</div>
			<!-- Sidebar -->
			<div id="sidebar">
				<div class="inner">
					<!-- Menu -->
					<nav id="menu">
						<header class="major">
							<h2>Menu</h2>
						</header>
						<ul>
							<li><a href="index.html">Introduction</a></li>
							<li>
								<span class="opener">How-To's</span>
								<ul>
									<li><a href="howto-module.html">How-To Godot 2 & 3</a></li>
									<li><a href="howto-gdnative.html">How-To GDNative</a></li>
									<li><a href="howto-server.html">How-To Server</a></li>
								</ul>
							</li>
							<li>
								<span class="opener">Functions</span>
								<ul>
									<li><a href="functions-module.html">Functions (Module) </a></li>
									<li><a href="functions-server.html">Functions (Server)</a></li>
								</ul>
							</li>
							<li>
								<span class="opener">Signals</span>
								<ul>
									<li><a href="signals-modules.html">Signals (Module)</a></li>
									<li><a href="signals-server.html">Signals (Server)</a></li>
								</ul>
							</li>
							<li>
								<span class="opener">Tutorials</span>
								<ul>
									<li><a href="tutorials-initializing.html">Initializing Steam</a></li>
									<li><a href="tutorials-stats-achievements.html">Stats and Achievements</a></li>
									<li><a href="tutorials-avatars.html">Avatars</a></li>
									<li><a href="tutorials-lobbies-p2p.html">Lobbies / P2P Networking</a></li>
									<li><a href="tutorials-mac-export.html">Mac Exporting</a></li>
									<li><a href="tutorials-achievement-icons.html">Achievment Icons</a></li>
									<li><a href="tutorials-rich-presence.html">Rich Presence</a></li>
									<li><a href="tutorials-linux-caveats.html">Linux Caveats</li>
								</ul>
							</li>
							<li><a href="games.html">Games Using GodotSteam</a></li>
							<li><a href="todo.html">To-Do</a></li>
							<li><a href="changelog.html">Change Log</a></li>
							<li><a href="contributors.html">Contributors / Donate</a></li>
						</ul>
					</nav>
				</div>
			</div>
		</div>
		<!-- Scripts -->
		<script src="js/jquery.min.js"></script>
		<script src="js/browser.min.js"></script>
		<script src="js/breakpoints.min.js"></script>
		<script src="js/util.js"></script>
		<script src="js/main.js"></script>
	</body>
</html>